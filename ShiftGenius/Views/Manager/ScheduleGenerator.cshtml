@using ShiftGeniusLibDB.Models;
@using ShiftGeniusLibDB;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    var scheduleDays = (List<ScheduleDay>) Model.Schedule.ScheduleDays;

    var groupedByDayOfWeek = scheduleDays
                                  .GroupBy(sd => sd.Day.DayOfWeek)
                                  .OrderBy(g => (int)g.Key);
}
<div>
    <div style="color:#47525e;text-align:center">
        <h1>Welcome @User.Identity.Name</h1>
        <h3>Schedule for the week of @Model.StartDate.ToShortDateString() to @Model.EndDate.ToShortDateString()</h3>
    </div>
    <div class="d-flex justify-content-center align-items-center" style="height:60vh;">
        <div class="container text-white" style="background-color: #343F4B; padding: 30px; height:40vh;">
            <div class="row" style="height:85%">
                @foreach (var group in groupedByDayOfWeek)
                {
                    <div class="col-md-1-7">
                        <div class="card text-center card-full-height" style="background-color: #969FAA;">
                            <div class="card-header" style="color:#122235; font-size:20px">
                                @group.Key
                            </div>
                            <div class="card-body d-flex justify-content-center align-items-center" style="color:#56606c;font-size:16px;font-weight:lighter">
                                @foreach (var scheduleDay in group)
                                {
                                    foreach (var employeeScheduled in scheduleDay.EmployeeScheduleds)
                                    {
                                        <div>
                                            @Basic_Functions.getEmployeeNameByID(employeeScheduled.EmployeeScheduledId)
                                            <br />
                                            @employeeScheduled.StartTime - @employeeScheduled.EndTime
                                            <br />
                                        </div>
                                    }
                                }
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="text-center mt-8">
        <a class="btn btn-success" style="margin-right:50px">Confirm</a>
        <a class="btn btn-primary" style="margin-right:50px">Edit</a>
        <a class="btn btn-primary" style="margin-right:50px">Regenerate</a>
        <a class="btn btn-danger" asp-controller="Manager" asp-action="Index">Cancel</a>
    </div>
</div>